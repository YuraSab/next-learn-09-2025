## üìù –í–∏–≤—á–µ–Ω–Ω—è Firebase –∑ Next.js

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

* **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É `firebase` –¥–æ –ø—Ä–æ—î–∫—Ç—É —á–µ—Ä–µ–∑ `npm install firebase`.
* **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:** –°—Ç–≤–æ—Ä—é—î–º–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `src/lib/firebase.ts`. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—î—é —Å–µ—Ä–≤—ñ—Å—ñ–≤ Firebase, —Ç–∞–∫–∏—Ö —è–∫ Firestore.
* **–ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:** –î–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è API-–∫–ª—é—á—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ñ–∞–π–ª `.env.local`. –ó–º—ñ–Ω–Ω—ñ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º `NEXT_PUBLIC_` –¥–æ—Å—Ç—É–ø–Ω—ñ —è–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ, —Ç–∞–∫ —ñ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ.




**–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**
```typescript
// src/lib/firebase.ts
import { initializeApp } from "firebase/app";
import { getFirestore } from "firebase/firestore";

const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  // ... —ñ–Ω—à—ñ –∑–º—ñ–Ω–Ω—ñ
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

export { db };
```



1. **const firebaseConfig = { ... }**
    * –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –û–±'—î–∫—Ç, —â–æ –º—ñ—Å—Ç–∏—Ç—å —É—Å—ñ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ —Ç–∞ –∫–ª—é—á—ñ —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É Firebase.
    * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞: –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É, —â–æ–± Firebase –∑–Ω–∞–≤, –∫—É–¥–∏ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –¥–∞–Ω—ñ. –ö–æ–∂–µ–Ω –∫–ª—é—á –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ø–µ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É:
      * **`apiKey:`** –¢–≤—ñ–π —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ API.
      * **`authDomain:`** –î–æ–º–µ–Ω –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.
      * **`projectId:`** –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É Firebase.
      * **`storageBucket:`** URL –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (Storage).
      * **`messagingSenderId:`** ID –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (Messaging).
      * **`appId:`** –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID —Ç–≤–æ–≥–æ –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É.

    
2.  **`const app = initializeApp(firebaseConfig);`**
    * –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –°—Ç–≤–æ—Ä—é—î –µ–∫–∑–µ–º–ø–ª—è—Ä "–¥–æ–¥–∞—Ç–∫—É" Firebase, –ø–µ—Ä–µ–¥–∞—é—á–∏ –π–æ–º—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ.
    * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞: –ó–∞–≥–∞–ª—å–Ω—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—é –º—ñ–∂ —Ç–≤–æ—ó–º –ø—Ä–æ—î–∫—Ç–æ–º —ñ –≤—Å—ñ–º–∞ —Å–µ—Ä–≤—ñ—Å–∞–º–∏ Firebase.

3.  **`const db = getFirestore(app);`**
    * –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –û—Ç—Ä–∏–º—É—î –¥–æ—Å—Ç—É–ø –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö Firestore, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —Ä–∞–Ω—ñ—à–µ –¥–æ–¥–∞—Ç–æ–∫ app.
    * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞: –ó–≤'—è–∑–æ–∫ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Ç–æ–±—ñ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó (—á–∏—Ç–∞–Ω–Ω—è, –∑–∞–ø–∏—Å, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è).

4.  **`export { db };`**
    * –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –†–æ–±–∏—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö db –¥–æ—Å—Ç—É–ø–Ω–∏–º –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É –≤ —ñ–Ω—à–∏—Ö —Ñ–∞–π–ª–∞—Ö —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É.




### 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ Firestore

* **`collection(db, 'posts')`**: –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –≤–∫–∞–∑—É—î, –∑ —è–∫–æ—é –∫–æ–ª–µ–∫—Ü—ñ—î—é —É Firestore –º–∏ —Ö–æ—á–µ–º–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∏: –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (`db`) —Ç–∞ –Ω–∞–∑–≤—É –∫–æ–ª–µ–∫—Ü—ñ—ó (`'posts'`).
* **`getDocs(postsCollection)`**: –¶—è —Ñ—É–Ω–∫—Ü—ñ—è —î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –¥–æ Firestore, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ **–≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏** –∑ –≤–∫–∞–∑–∞–Ω–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó. –¶–µ –∞–Ω–∞–ª–æ–≥ `fetch` –∑–∞–ø–∏—Ç—É, –∞–ª–µ –¥–ª—è Firestore.
* **`querySnapshot.docs`**: –ü—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –º–∞—Å–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤. –ö–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Ü—å–æ–≥–æ –º–∞—Å–∏–≤—É –º—ñ—Å—Ç–∏—Ç—å –¥–∞–Ω—ñ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
* **`doc.data()`**: –¶–µ–π –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ –ø—Ä–æ—Å—Ç–æ–≥–æ JavaScript-–æ–±'—î–∫—Ç–∞.
* **`doc.id`**: –¶–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID, —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è Firestore –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞. –í—ñ–Ω —î —Ä—è–¥–∫–æ–º (`string`) —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á.

–ú–∏ –∑–∞–º—ñ–Ω–∏–ª–∏ –Ω–∞—à—É –ª–æ–≥—ñ–∫—É –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ `fetch` –Ω–∞ Firebase SDK, —â–æ –¥–æ–∑–≤–æ–ª–∏–ª–æ –Ω–∞–º –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–æ—é, –¥–∏–Ω–∞–º—ñ—á–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.




### 3. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

* **`doc(db, 'posts', id)`**: –¶—è —Ñ—É–Ω–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —É Firestore. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (`db`), –Ω–∞–∑–≤—É –∫–æ–ª–µ–∫—Ü—ñ—ó (`'posts'`) —Ç–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ (`id`).
* **`getDoc(docRef)`**: –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ—Ç—Ä–∏–º—É—î –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º.
* **`docSnap.exists()`**: –¶–µ –≤–∞–∂–ª–∏–≤–∏–π –º–µ—Ç–æ–¥, —è–∫–∏–π –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –¥—ñ–π—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç —ñ—Å–Ω—É—î –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. –Ø–∫—â–æ –π–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `notFound()` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–∫–∏.
* **`docSnap.data()`**: –ü–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —É –≤–∏–≥–ª—è–¥—ñ JavaScript-–æ–±'—î–∫—Ç–∞.
* **`docSnap.id`**: –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è Firestore.

–ú–∏ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –∑ JSONPlaceholder –Ω–∞ Firestore –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö. –ù–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è CRUD-–æ–ø–µ—Ä–∞—Ü—ñ–π (Create, Update, Delete) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **Server Actions**. –ì–æ—Ç–æ–≤–∏–π –¥–æ —Ü—å–æ–≥–æ?


### 4. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è CRUD –∑ Server Actions (–î–æ–¥–∞–≤–∞–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è)

* **`addDoc(collectionRef, data)`**: –î–æ–¥–∞—î –Ω–æ–≤–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ –∫–æ–ª–µ–∫—Ü—ñ—ó. Firebase –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞.
* **`doc(db, collectionName, docId)`**: –°—Ç–≤–æ—Ä—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç. –¶–µ–π –æ–±'—î–∫—Ç-–ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è –æ–ø–µ—Ä–∞—Ü—ñ–π, —è–∫-–æ—Ç `deleteDoc`.
* **`deleteDoc(docRef)`**: –í–∏–¥–∞–ª—è—î –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º.
* **`revalidatePath('/')`**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è **on-demand revalidation**. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª—è—î Next.js, —â–æ –∫–µ—à –¥–ª—è –º–∞—Ä—à—Ä—É—Ç—É `/` —Å—Ç–∞–≤ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–∏–º, —ñ –π–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–¥—Ä–∞–∑—É –ø–æ–±–∞—á–∏—Ç—å –∑–º—ñ–Ω–∏, –≤–Ω–µ—Å–µ–Ω—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.




### 5. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Å—Ç–∞ (Update)

* **`updateDoc(docRef, data)`**: –û–Ω–æ–≤–ª—é—î —ñ—Å–Ω—É—é—á–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —É Firestore. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∏–π–º–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç (`docRef`) —Ç–∞ –æ–±'—î–∫—Ç –∑ –ø–æ–ª—è–º–∏, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏. –í–æ–Ω–∞ –Ω–µ –∑–º—ñ–Ω—é—î –ø–æ–ª—è, —è–∫—ñ –Ω–µ –±—É–ª–∏ –≤–∫–∞–∑–∞–Ω—ñ –≤ –æ–±'—î–∫—Ç—ñ –¥–∞–Ω–∏—Ö.
* **`revalidatePath` –¥–ª—è –∫—ñ–ª—å–∫–æ—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤:** –ü—ñ–¥ —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, —è–∫—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –Ω–∞ –∫—ñ–ª—å–∫–æ—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø–æ—Å—Ç–∞ —Ç–∞ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π), –≤–∞–∂–ª–∏–≤–æ –æ–Ω–æ–≤–∏—Ç–∏ –∫–µ—à –¥–ª—è –≤—Å—ñ—Ö —Ü–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤, —â–æ–± –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∂–¥–∏ –±–∞—á–∏–≤ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ.
* **Server Actions –¥–ª—è CRUD:** –ú–∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞–ª–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (Update) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Server Action `updatePost` —É —Ñ–∞–π–ª—ñ `src/actions/postActions.ts`, —â–æ –¥–æ–∑–≤–æ–ª–∏–ª–æ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—é –ª–æ–≥—ñ–∫—É CRUD-–æ–ø–µ—Ä–∞—Ü—ñ–π, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ –ø–æ—Å—Ç–∞–º–∏, –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.




### 7. –°—Ç—Ä—ñ–º—ñ–Ω–≥ –¥–∞–Ω–∏—Ö: Real-time Listeners (onSnapshot)

* **Real-time Listener:** –¶–µ –º–µ—Ö–∞–Ω—ñ–∑–º, —è–∫–∏–π –∑–∞–º—ñ–Ω—é—î —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π Polling (–ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –∑–∞–ø–∏—Ç–∏). –í—ñ–Ω –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –ø–æ—Å—Ç—ñ–π–Ω–µ –∑'—î–¥–Ω–∞–Ω–Ω—è (WebSockets) –∑ Firestore, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö "–Ω–∞–¥—Å–∏–ª–∞—Ç–∏" –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∏—Ç—Ç—î–≤–æ, –∫–æ–ª–∏ –¥–∞–Ω—ñ –∑–º—ñ–Ω—é—é—Ç—å—Å—è.
* **`onSnapshot(query, callback)`:** –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î Listener. –í–æ–Ω–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é `unsubscribe`, —è–∫—É –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—Ä–∏ –¥–µ–º–æ–Ω—Ç–∞–∂—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`useEffect cleanup function`) –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤–∏—Ç–æ–∫—É –ø–∞–º'—è—Ç—ñ.
* **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:** –î–ª—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **–ø—ñ–¥–∫–æ–ª–µ–∫—Ü—ñ—è** (`collection(db, 'posts', postId, 'comments')`), —â–æ –¥–æ–∑–≤–æ–ª—è—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –ø—ñ–¥ –∫–æ–∂–Ω–∏–º –ø–æ—Å—Ç–æ–º.
* **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:** –ö–æ–ª–∏ Server Action (`addComment`) —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ —É Firestore, Listener –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î —ñ –æ–Ω–æ–≤–ª—é—î `comments` (`setComments`), –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –º–∏—Ç—Ç—î–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI **–±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `mutate` SWR** —á–∏ **`revalidatePath` Next.js**.




## üìù –í–∏–≤—á–µ–Ω–Ω—è Firebase –∑ Next.js: –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

### 8. –ë–∞–∑–æ–≤–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (Email/Password, In/Out)

* **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Auth:** –°–µ—Ä–≤—ñ—Å Firebase Auth —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `getAuth(app)` —É `src/lib/firebase.ts`.
* **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **React Context** —Ç–∞ **Client Components** –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –≤—Ö–æ–¥—É.

| –§—É–Ω–∫—Ü—ñ—è Firebase | –û–ø–∏—Å |
| :--- | :--- |
| **`onAuthStateChanged(auth, callback)`** | **Real-time Listener** –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –ø–æ—Å—Ç—ñ–π–Ω–µ –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î `callback` —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ —Å—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è (–≤—Ö—ñ–¥, –≤–∏—Ö—ñ–¥, —Ç–æ–∫–µ–Ω –æ–Ω–æ–≤–ª–µ–Ω–æ). **–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–π** –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Å—Ç–∞–Ω—É. |
| **`createUserWithEmailAndPassword()`** | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –≤–∏–∫–æ–Ω—É—î –≤—Ö—ñ–¥. |
| **`signInWithEmailAndPassword()`** | **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–í—Ö—ñ–¥)** —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞–Ω —Å–µ—Å—ñ—ó. |
| **`signOut(auth)`** | **–í–∏—Ö—ñ–¥** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Å–∏—Å—Ç–µ–º–∏. –û—á–∏—â–∞—î —Ç–æ–∫–µ–Ω —Å–µ—Å—ñ—ó –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ –±—Ä–∞—É–∑–µ—Ä–∞. –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –≤–∏–∫–ª–∏–∫—É `onAuthStateChanged` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º `null`. |
* **–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Å—ñ—ó:** Firebase Auth –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω —Å–µ—Å—ñ—ó (JWT) —É **localStorage** –±—Ä–∞—É–∑–µ—Ä–∞. `onAuthStateChanged` —á–∏—Ç–∞—î —Ü–µ–π —Ç–æ–∫–µ–Ω –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Å—ñ—ó.
* **–õ–æ–∫–∞—Ü—ñ—è –∫–æ–¥—É:** –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É **Client Components** –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ö—É–∫—ñ–≤ (`useState`, `useContext`, `useEffect`) —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π Firebase.
